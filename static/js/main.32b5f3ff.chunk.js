(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a(423)},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),c=a.n(i),o=(a(165),a(13)),s=a(15),l=a(17),h=a(16),p=a(18),u=a(30),_=(a(166),a(155)),d=a.n(_),g=a(42),f=a.n(g),m=(a(167),a(44)),b=a.n(m),v=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.id,n=e.durationThere,i=e.durationBack,c=e.changesThere,o=e.changesBack,s=e.onClick,l={backgroundColor:b.a[50]};return r.a.createElement("div",{id:a,className:"Flight__wrapper"},r.a.createElement("div",{className:"Flight__wrapper__content"},r.a.createElement("div",{className:"Flight__wrapper__content__price-box"},r.a.createElement("div",{className:"Flight__wrapper__content__price-box__details"},r.a.createElement("div",{className:"Flight__wrapper__content__price-box__details__label"},"price"),r.a.createElement("div",{className:"Flight__wrapper__content__price-box__details__price"},r.a.createElement("span",{className:"Flight__wrapper__content__price-box__details__price__currency"},"$"),r.a.createElement("span",{className:"Flight__wrapper__content__price-box__details__price__amount"},t)),r.a.createElement("div",{className:"Flight__wrapper__content__price-box__details__info"},"per passenger"))),r.a.createElement("div",{className:"Flight__wrapper__content__arrows"},r.a.createElement("div",{className:"Flight__wrapper__content__arrows__right"}),r.a.createElement("div",{className:"Flight__wrapper__content__arrows__left"})),r.a.createElement("div",{className:"Flight__wrapper__content__flights"},r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight"},r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight__duration"},n),r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight__changes"},c)),r.a.createElement(d.a,{style:l}),r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight"},r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight__duration"},i),r.a.createElement("div",{className:"Flight__wrapper__content__flights__flight__changes"},o))),r.a.createElement("div",{className:"Flight__wrapper__content__flights__button"},r.a.createElement(f.a,{variant:"contained",id:"select-flight-{id}",color:"primary",size:"large",onChange:s},"select"))))}}]),t}(n.Component),w=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"toString",value:function(){return"(".concat(this.id,") $ ").concat(this.price," > ").concat(this.startHour," [duration=").concat(this.length,"]")}}],[{key:"fromBackendData",value:function(t){return Object.assign(new e,t)}}]),e}(),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).onBackClick=function(){(0,a.props.onBackClick)()},a.state={flights:a.props.flights,passengers:a.props.passengers,selectedFlight:""},a._getDuration=function(e){var t=0;1===e.length?t=e[0].length:e.forEach(function(e){return t+=e.length});var a=Math.floor(t),n=Math.round(60*(t-a));return 0===a?n+"min":0===n?a+"h":a+"h "+n+"min"},a._getChanges=function(e){var t="direct";return 2===e.length?t="1 change":e.length>=3?t=e.length-1+" changes":t},a.selectFlight=function(){a.setState({selectedFlight:"flight"}),console.log(a.state.selectedFlight)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.flights,n=(t.passengers,a.map(function(t){var a=t.id,n=t.price,i=e._getDuration(t.inboundPath),c=e._getChanges(t.inboundPath),o=e._getDuration(t.outboundPath),s=e._getChanges(t.outboundPath);return r.a.createElement(v,{key:a,price:n,id:a,durationThere:o,changesThere:s,durationBack:i,changesBack:c,onClick:e.selectFlight})}));return r.a.createElement("div",{className:"App-body__flights-view"},n,r.a.createElement("div",{className:"App-body__flights-view__button"},r.a.createElement(f.a,{color:"primary",onClick:this.onBackClick},"new search")))}}]),t}(n.Component),y=a(97),E=a(158),j=a.n(E),O=a(43),C=a.n(O),N=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.disabled,n=e.onClick;return r.a.createElement(f.a,{variant:"contained",color:"primary",size:"large",style:{width:"100%"},onClick:n,disabled:a},t)}}]),t}(n.Component),S=function e(t){Object(o.a)(this,e),this.id=t.id,this.code=t.code,this.country=t.country,this.city=t.city},F=a(157),A=a.n(F),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={selectedAirport:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"extractSelectedValue",value:function(e){return e.target.value}},{key:"render",value:function(){var e=this,t=this.props,a=t.onChange,n=t.airports,i=t.label,c=this.state.selectedAirport;return r.a.createElement("div",{className:"App-body__search-view__select-airport"},r.a.createElement(C.a,{id:"select-airport",placeholder:"select airport",select:!0,label:i,value:c,onChange:function(t){var r=e.extractSelectedValue(t);e.setState({selectedAirport:r}),a(n[r])},InputLabelProps:{shrink:!0},margin:"none"},n.map(function(e,t){return r.a.createElement(A.a,{key:e.id,value:e.id},e.city)})))}}]),t}(n.Component),D=a(98),B=a.n(D),x=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"getAirportResources",value:function(){return B.a.get("".concat(this.API_URL,"/airports")).then(function(e){return e.data.map(function(e){return new S(e)})})}},{key:"fetchFlights",value:function(e,t,a,n){return B.a.get("".concat(this.API_URL,"/flights/").concat(a,"/").concat(n,"/").concat(e.id,"/").concat(t.id)).then(function(e){return e.data.map(function(e){return w.fromBackendData(e)})})}}]),e}();x.API_URL="http://warsawjs-flights-api.herokuapp.com";var T=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.label,n=e.id;return r.a.createElement("div",{className:"App-body__search-view__select-date"},r.a.createElement(C.a,{id:n,label:a,onChange:function(e){t(e.target.value)},type:"date",InputLabelProps:{shrink:!0},format:"DD/MM/YYYY"}))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={airportFrom:null,airportTo:null,flightsSearchPending:!1,departureDate:null,returnDate:null,passengers:1},a._selectAirport=function(e,t){a.setState(Object(y.a)({},e,t))},a._selectDate=function(e,t){a.setState(Object(y.a)({},e,t))},a._selectPassengers=function(e){a.setState({passengers:e})},a.onSearchPress=function(){a.setState({flightsSearchPending:!0},function(){x.fetchFlights(a.state.airportFrom,a.state.airportTo,a.state.departureDate,a.state.returnDate).then(function(e){a.setState({flightsSearchPending:!1},function(){return a.props.onSearchClick(e)})})})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.airports,n=t.pending,i=this.state,c=i.airportFrom,o=i.airportTo,s=i.departureDate,l=i.returnDate,h=i.passengers,p=i.flightsSearchPending,u=!Boolean(c&&o&&s&&l);return r.a.createElement("div",{className:"App-body__search-view"},!n&&r.a.createElement("div",{className:"App-body__search-view__wrapper"},r.a.createElement(P,{label:"FROM",onChange:function(t){return e._selectAirport("airportFrom",t)},airports:a}),r.a.createElement(P,{label:"TO",onChange:function(t){return e._selectAirport("airportTo",t)},airports:a}),r.a.createElement(T,{label:"Departure",id:"departure-date",onChange:function(t){return e._selectDate("departureDate",t)}}),r.a.createElement(T,{label:"Return",id:"return-date",onChange:function(t){return e._selectDate("returnDate",t)}}),r.a.createElement("div",{className:"App-body__search-view__select-passengers"},r.a.createElement(C.a,{id:"passengers",label:"Passengers",value:h,onChange:function(t){return e._selectPassengers(t.target.value)},type:"number",InputLabelProps:{shrink:!0},inputProps:{min:1},margin:"none",color:"secondary"}))),(n||p)&&r.a.createElement(j.a,null),!p&&r.a.createElement("div",{className:"App-body__search-view__button"},r.a.createElement(N,{text:"Search flights",onClick:this.onSearchPress,disabled:u})))}}]),t}(n.Component),I=a(96),V=a.n(I),R=a(95),L=a(50),U=a.n(L),W=Object(R.createMuiTheme)({palette:{primary:{light:b.a[100],main:b.a[500],dark:b.a[800],contrastText:"#fff",contrastThreshold:3},secondary:{light:U.a[100],main:U.a[500],dark:U.a[900],contrastText:"#fff",contrastThreshold:3}},typography:{useNextVariants:!0,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},overrides:{MuiFormControl:{root:{textAlign:"left"}},MuiInputBase:{root:{fontSize:"1.4em",width:"100%"}},MuiSelect:{root:{fontSize:"1em",width:"11em"}},MuiFormLabel:{root:{fontSize:"1.3em",lineHeight:"1.3em"}}}}),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={searchViewVisible:!0,airportsPending:!0,airports:[],flights:[]},a.onSearchClick=a.onSearchClick.bind(Object(u.a)(Object(u.a)(a))),a.onBackClick=a.onBackClick.bind(Object(u.a)(Object(u.a)(a))),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.getAirportResources().then(function(t){e.setState({airportsPending:!1,airports:t})})}},{key:"onSearchClick",value:function(e){this.setState({searchViewVisible:!1,flights:e})}},{key:"onBackClick",value:function(){this.setState({searchViewVisible:!0})}},{key:"render",value:function(){var e=this.state,t=e.searchViewVisible,a=e.airports,n=e.airportsPending,i=e.flights;return r.a.createElement(V.a,{theme:W},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"App-header__content"},r.a.createElement("h1",{className:"App-header__content__title"},"Welcome to flight search"),r.a.createElement("div",{className:"App-header__content__logo"}))),r.a.createElement("div",{className:"App-body"},t&&r.a.createElement(M,{onSearchClick:this.onSearchClick,airports:a,pending:n}),!t&&r.a.createElement(k,{flights:i,onBackClick:this.onBackClick})),r.a.createElement("footer",{className:"App-footer"},"App created by ",r.a.createElement("a",{href:"https://github.com/alicjaotto"},"Alicja Otto")," with ReactJS & material-ui during #20 WarsawJS workshops")))}}]),t}(n.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var H=a(159),$=a.n(H);c.a.render(r.a.createElement(function(){return r.a.createElement($.a,null,r.a.createElement(z,null))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/warsawjs-workshop-20-flight-scanner",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/warsawjs-workshop-20-flight-scanner","/service-worker.js");J?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Y(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Y(e)})}}()}},[[160,1,2]]]);
//# sourceMappingURL=main.32b5f3ff.chunk.js.map